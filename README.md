## FPGA Audio WavePlayer

The FPGA Audio WavePlayer is an audio playback system designed to run on the Altera MAX10 FPGA. The project enables the playback of `.wav` files from an SD card through a standard headphone jack. It features an LCD display for track information and supports various playback speeds and modes controlled via push-buttons and slide switches.

## Features

- **WAV File Support**: Supports playback of stereo audio files in `.wav` format with 16-bit audio samples.
- **MicroSD Card Integration**: Audio files are read from a MicroSD card.
- **Headphone Jack Output**: Standard headphone jack for audio output.
- **LCD Display**: Displays track number and track title (filename) on the first line. The second line shows player functions like STOPPED, PAUSED, PBACK-NORM SPD, PBACK-HALF SPD, PBACK-DBL SPD, and PBACK-MONO.
- **Playback Modes**: Supports normal speed, half-speed, double speed, and mono-left audio playback, controlled via slide switches.
- **User Interface**: Includes push-buttons for Play/Pause, Stop, Previous, and Next track control.

## Hardware Specifications

- **Audio Output**: Supports stereo audio output at 16-bit resolution.
- **SD Card Interface**: Reads audio data from a MicroSD card.
- **LCD Display**: Displays track information and playback mode.
- **Push-Buttons**: Used for play/pause, stop, track navigation.
- **Slide Switches**: Used to control playback speed and mono mode.
- **Debounced Buttons**: Push-buttons are debounced using a timer to ensure accurate signal processing.

## Project Phases

### Phase I: Loop_Audio
Ensure that the audio pipeline hardware is fully functional before proceeding to the next phase.

### Phase II: CLI_Testing
- Integrate the FatFS Command Line Interface (CLI) with the audio pipeline.
- Use CLI commands to manage SD card interactions and play `.wav` files.
- Optimize the FatFS buffer size to ensure audio playback without distortion.
- Implement basic audio processing, controlled by slide switches.

### Phase III: Pushbuttons
- Develop a debouncing mechanism for push-buttons using a timer.
- Ensure reliable user input handling for play/pause, stop, and track navigation.

### Phase IV: WavePlayer
- Finalize the WavePlayer by integrating CLI functionality with the playback system.
- Implement functions to identify `.wav` files and manage playback.
- Develop an LCD interface to display track information and control playback modes.

### Project Directory Structure

The project is organized into several directories, each corresponding to a different phase of development. For the `software` directory, it contains the source code for each phase of the FPGA Audio WavePlayer project.


## Eclipse Nios II Setup and Development
This project is developed and run in the Eclipse Nios II IDE, specifically tailored for the Altera Nios II soft processor. Below are the steps and considerations for setting up and running the project within this environment.



### Running the WavePlayer

- The `WavePlayer` directory contains the final phase of the project and can be run directly. It includes all the necessary files to play `.wav` files using the FPGA.
- Each of the other directories (`Loop_Audio`, `CLI_Testing`, and `Pushbuttons`) represents an incremental phase of development, with their own Board Support Package (BSP) and source files.



### Environment Setup

1. **Install Nios II Software Build Tools for Eclipse**:
   - Ensure you have the Nios II Software Build Tools for Eclipse installed as part of the Intel Quartus Prime software package.
   - This includes the Nios II SBT, which integrates Eclipse with the Nios II processor environment.

2. **Project Import**:
   - Open Eclipse Nios II and import the project.
   - Navigate to `File` > `Import` > `Existing Projects into Workspace`.
   - Select the root directory where the project files are located and ensure the project appears in the "Projects" list.
   - Click `Finish` to import the project into your workspace.

3. **Set Up the Target Hardware**:
   - Before running the project, ensure the Altera MAX10 FPGA is properly set up and connected.
   - Load the necessary FPGA configuration files using Quartus Prime to configure the FPGA with the required hardware components like audio codec, SD card interface, and the LCD.

4. **Build the Project**:
   - In Eclipse, right-click on the project in the Project Explorer and select `Build Project`.
   - Ensure that the build completes without errors, and the `.elf` file is generated for the Nios II processor.

5. **Run the Project**:
   - Connect the FPGA board to your computer via USB.
   - In Eclipse, go to `Run` > `Run Configurations`.
   - Select `Nios II Hardware` and create a new run configuration.
   - Set the `.elf` file generated by the project as the application to run.
   - Ensure that the correct hardware is selected under the `Target Connection` settings.
   - Click `Run` to download the program onto the FPGA and start the execution.


### Advanced Configuration

- **Custom BSP (Board Support Package)**:
  - You can create a custom BSP tailored to your specific hardware setup.
  - This involves configuring the memory map, selecting drivers, and setting up the hardware abstraction layer.
  - Customizing the BSP can optimize the performance of the Nios II processor and ensure that all hardware components are correctly interfaced.

- **Adjusting Compiler Settings**:
  - Modify the compiler and linker settings within the Eclipse project properties to optimize for speed, size, or debug information as needed.
  - This can include adjusting optimization levels, including debug symbols, and setting specific memory locations for code and data sections.

